{{- define "main" -}}

{{- $avatar_url := site.Params.avatar -}}
{{- if $avatar_url -}}
{{- /* Logic to handle local files vs gravatar */ -}}
{{- if not (or (in $avatar_url "http") (hasPrefix $avatar_url "/")) -}}
{{- $official_cdn := "https://www.gravatar.com/avatar/" -}}
{{- $cdn := (site.Params.gravatarCdn | default $official_cdn) -}}
{{- $md5 := (md5 $avatar_url) -}}
{{- $avatar_url = print $cdn $md5 "?s=160&d=identicon" -}}
{{- end -}}
{{- end -}}

{{- if or $avatar_url site.Params.name -}}
<div class="-mt-2 mb-12 flex items-center">
    {{- if $avatar_url -}}
    <div
        class="h-24 w-24 shrink-0 rounded-full border-[0.5px] border-black/10 bg-white/50 p-3 ltr:mr-5 ltr:-ml-1 rtl:-mr-1 rtl:ml-5 dark:bg-white/90!">
        <img class="not-prose my-0 h-full w-full rounded-full bg-black/5! hover:animate-spin dark:bg-black/80!"
            src="{{- $avatar_url -}}" alt="{{- site.Params.name | default site.Title -}}" />
    </div>
    {{- end -}}
    {{- if site.Params.name -}}
    <div>
        <div class="mt-3 mb-1 text-2xl font-medium text-black dark:text-white">
            {{- site.Params.name -}}
        </div>
        <div class="break-words">
            {{- site.Params.bio | default (print `A personal blog by `
            site.Params.name) -}}
        </div>
    </div>
    {{- end -}}
</div>
{{- end -}}

<section class="prose dark:prose-invert">
    {{ .Content }}
</section>

{{- end -}}